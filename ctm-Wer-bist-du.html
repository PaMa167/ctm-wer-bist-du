<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CTM – Wer bist du?</title>
<style>
  :root{--bg:#f7fafc;--card:#ffffff;--accent:#4f46e5;--muted:#6b7280}
  body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:var(--bg);color:#111}
  .wrap{max-width:920px;margin:20px auto;padding:16px}
  header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:12px}
  h1{font-size:20px;margin:0}
  .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(15,23,42,0.06);}
  .q{margin-bottom:12px}
  .question{font-weight:600;margin-bottom:8px}
  .btns{display:flex;gap:8px;flex-wrap:wrap}
  button.opt{min-width:44px;height:44px;border-radius:8px;border:1px solid #e6e9ef;background:white;font-weight:600}
  button.opt.selected{background:linear-gradient(90deg,var(--accent),#7c3aed);color:white;border:0;box-shadow:0 6px 12px rgba(79,70,229,0.18)}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:720px){ .grid{grid-template-columns:1fr 360px} }
  .progress{height:12px;background:#eef2ff;border-radius:8px;overflow:hidden}
  .bar{height:100%;background:linear-gradient(90deg,#34d399,#60a5fa);}
  .legend{font-size:13px;color:var(--muted);margin-bottom:8px}
  .small{font-size:13px;color:var(--muted)}
  footer{margin-top:12px;text-align:center;color:var(--muted);font-size:13px}
  .flex{display:flex;gap:8px;align-items:center}
  .download{background:var(--accent);color:white;padding:8px 12px;border-radius:8px;border:0;font-weight:600}
  .mutebtn{background:#f3f4f6;border-radius:8px;padding:8px 10px;border:0}
</style>
</head>
<body>
<div class="wrap">
  <header><h1>CTM – Wer bist du?</h1><div class="small">Trainer • Coach • Manager (4‑Punkte-Skala)</div></header>
  <main class="grid">
    <section class="card" id="quiz">
      <div class="legend">Bewerte jede Aussage: 1 = Trifft gar nicht zu · 2 = Eher nicht · 3 = Eher ja · 4 = Trifft voll zu</div>
      <div id="questions"></div>
      <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
        <button class="download" id="downloadBtn">Ergebnis herunterladen (JSON)</button>
        <button class="mutebtn" id="resetBtn">Zurücksetzen</button>
      </div>
    </section>

    <aside class="card" id="result">
      <h2 style="margin:0 0 8px 0">Echtzeitergebnis</h2>
      <div class="small" style="margin-bottom:8px">Dein Profil als Mischform</div>
      <div id="bars" style="display:flow-root;gap:8px"></div>
      <div style="margin-top:10px" id="interpretation" class="small"></div>
      <div style="margin-top:12px" class="small">Download: JSON-Datei mit deinen Antworten und Prozentwerten.</div>
    </aside>
  </main>

  <footer class="small">Hinweis: Kurzes Self-Assessment — zur Orientierung nutzen.</footer>
</div>

<script>
(function(){
  const questions = [
    {id:1,text:"Ich vermittle gerne Wissen strukturiert und Schritt für Schritt.",role:"Trainer"},
    {id:2,text:"Ich stelle lieber Fragen, um andere zur eigenen Erkenntnis zu führen.",role:"Coach"},
    {id:3,text:"Ich übernehme Verantwortung für Entscheidungen und Ergebnisse.",role:"Manager"},
    {id:4,text:"Ich arbeite gerne mit Gruppen und führe durch klar definierte Übungen.",role:"Trainer"},
    {id:5,text:"Ich helfe anderen, ihre eigenen Ziele und Lösungen zu finden.",role:"Coach"},
    {id:6,text:"Ich plane Ressourcen, priorisiere und delegiere Aufgaben.",role:"Manager"},
    {id:7,text:"Ich erkläre komplexe Inhalte mit Beispielen oder Analogien.",role:"Trainer"},
    {id:8,text:"Ich höre aktiv zu und gebe reflektierte Rückmeldungen.",role:"Coach"},
    {id:9,text:"Ich setze Ziele und messe Fortschritt anhand klarer KPIs.",role:"Manager"}
  ];

  const roles = ["Trainer","Coach","Manager"];
  const qsDiv = document.getElementById('questions');
  const barsDiv = document.getElementById('bars');
  const interpDiv = document.getElementById('interpretation');
  const downloadBtn = document.getElementById('downloadBtn');
  const resetBtn = document.getElementById('resetBtn');

  // initial answers = neutral (2)
  const answers = {};
  questions.forEach(q=>answers[q.id]=2);

  function renderQuestions(){
    qsDiv.innerHTML='';
    questions.forEach(q=>{
      const qwrap = document.createElement('div');
      qwrap.className='q';
      const qtext = document.createElement('div');
      qtext.className='question';
      qtext.textContent = q.text;
      qwrap.appendChild(qtext);
      const btns = document.createElement('div');
      btns.className='btns';
      [1,2,3,4].forEach(n=>{
        const b = document.createElement('button');
        b.className='opt'+(answers[q.id]===n?' selected':'');
        b.textContent = n;
        b.addEventListener('click',()=>{ answers[q.id]=n; renderQuestions(); renderResult(); });
        btns.appendChild(b);
      });
      const sel = document.createElement('div');
      sel.className='small';
      sel.style.marginTop='6px';
      sel.textContent = 'Deine Auswahl: ' + answers[q.id];
      qwrap.appendChild(btns);
      qwrap.appendChild(sel);
      qsDiv.appendChild(qwrap);
    });
  }

  function computeScores(){
    const totals = {Trainer:0,Coach:0,Manager:0};
    const counts = {Trainer:0,Coach:0,Manager:0};
    questions.forEach(q=>{ totals[q.role]+=answers[q.id]; counts[q.role]++; });
    const result = {};
    roles.forEach(r=>{
      const avg = counts[r] ? totals[r]/counts[r] : 0;
      // avg in 1..4 -> map to 0..100
      result[r] = Math.round(((avg - 1) / 3) * 100);
    });
    return result;
  }

  function renderResult(){
    const scores = computeScores();
    barsDiv.innerHTML='';
    roles.forEach(r=>{
      const wrap = document.createElement('div');
      wrap.style.marginBottom='10px';
      const head = document.createElement('div');
      head.style.display='flex';
      head.style.justifyContent='space-between';
      head.style.alignItems='center';
      const title = document.createElement('div');
      title.textContent = r + ': ' + scores[r] + '%';
      title.style.fontWeight='600';
      const barbg = document.createElement('div');
      barbg.className='progress';
      barbg.style.marginTop='6px';
      const bar = document.createElement('div');
      bar.className='bar';
      bar.style.width = scores[r] + '%';
      barbg.appendChild(bar);
      head.appendChild(title);
      wrap.appendChild(head);
      wrap.appendChild(barbg);
      const text = document.createElement('div');
      text.className='small';
      text.style.marginTop='6px';
      if(scores[r]>=75) text.textContent = 'Ausgeprägt — Stärke, die du beruflich gezielt einsetzen kannst.';
      else if(scores[r]>=50) text.textContent = 'Gut entwickelt — verlässlich in diesem Bereich.';
      else if(scores[r]>=25) text.textContent = 'Moderates Potenzial — mit Fokus ausbaufähig.';
      else text.textContent = 'Gering ausgeprägt — hier kannst du Neues lernen oder Rollen vermeiden.';
      wrap.appendChild(text);
      barsDiv.appendChild(wrap);
    });
    // interpretation - mixed form
    interpDiv.innerHTML = '<strong>Du bist eine Mischform:</strong><br>' + roles.map(r=> r + ': ' + scores[r] + '%').join('<br>');
  }

  function downloadJSON(){
    const scores = computeScores();
    const payload = { answers, scores, timestamp: new Date().toISOString() };
    const blob = new Blob([JSON.stringify(payload, null, 2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'CTM-Wer-bist-du-result.json';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  }

  function resetAll(){
    questions.forEach(q=>answers[q.id]=2);
    renderQuestions();
    renderResult();
  }

  downloadBtn.addEventListener('click',downloadJSON);
  resetBtn.addEventListener('click',resetAll);

  // initial render
  renderQuestions();
  renderResult();

  // expose for debugging (optional)
  window._CTM = {questions,answers,computeScores,renderResult};
})();
</script>
</body>
</html>
